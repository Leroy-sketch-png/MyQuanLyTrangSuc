<Window x:Class="MyQuanLyTrangSuc.View.EditItemCategoryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MyQuanLyTrangSuc.View" 
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        Title="Edit Category" Height="500" Width="620"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Border BorderBrush="#747525" BorderThickness="1" CornerRadius="10" Background="White">
        <Border.Effect>
            <DropShadowEffect BlurRadius="10" ShadowDepth="3" Color="#888"/>
        </Border.Effect>

        <Grid>
            <!-- Title Bar -->
            <Border Height="50" Background="#747525" CornerRadius="10,10,0,0" Margin="0,0,0,448">
                <Grid>
                    <TextBlock Text="EDITING CATEGORY" 
                               Foreground="White" 
                               FontSize="20" 
                               FontWeight="Bold"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"/>

                    <Button x:Name="CloseButton" 
                            Content="✕" 
                            Foreground="White"
                            Background="Transparent"
                            BorderThickness="0"
                            FontSize="14"
                            Width="40"
                            Height="40"
                            HorizontalAlignment="Right"
                            Click="CloseButton_Click"/>
                </Grid>
            </Border>

            <!-- Main Content -->
            <Grid Margin="20,60,20,20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>

                <!-- Input Fields -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>

                    <!-- Column 1 -->
                    <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,10,20">
                        <Label Content="CATEGORY ID:" 
                               Foreground="#747525" 
                               FontSize="14" 
                               FontWeight="Bold"/>
                        <Border BorderBrush="#747525" 
                                BorderThickness="1" 
                                CornerRadius="3" 
                                Padding="8"
                                Background="#f9f9f9">
                            <TextBlock x:Name="IDTextBlock" 
                                      Text="{Binding EditedItemCategory.CategoryId}" 
                                      FontSize="16"
                                      Foreground="#333"/>
                        </Border>
                    </StackPanel>

                    <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,10,0">
                        <Label Content="PROFIT:" 
                               Foreground="#747525" 
                               FontSize="14" 
                               FontWeight="Bold"/>
                        <TextBox x:Name="profitPercentageTextBox"
                                Text="{Binding EditedItemCategory.ProfitPercentage, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                FontSize="16"
                                Padding="8"
                                BorderBrush="#747525"
                                BorderThickness="1"
                                Background="#FFF8F8F8"
                                PreviewTextInput="ProfitPercentage_PreviewTextInput"
                                PreviewKeyDown="ProfitPercentage_PreviewKeyDown"
                                TextChanged="ProfitPercentage_TextChanged">
                            <TextBox.ToolTip>
                                <ToolTip Foreground="Black" Background="White" Content="Profit must be between 0 and 100"/>
                            </TextBox.ToolTip>
                        </TextBox>
                    </StackPanel>

                    <!-- Column 2 -->
                    <StackPanel Grid.Column="1" Grid.Row="0" Margin="10,0,0,20">
                        <Label Content="NAME:" 
                               Foreground="#747525" 
                               FontSize="14" 
                               FontWeight="Bold"/>
                        <TextBox x:Name="NameTextBox"
                                Text="{Binding EditedItemCategory.CategoryName, Mode=TwoWay}"
                                FontSize="16"
                                Padding="8"
                                BorderBrush="#747525"
                                BorderThickness="1"
                                Background="#FFF8F8F8">
                            <TextBox.ToolTip>
                                <ToolTip Foreground="Black" Background="White" Content="Please enter a valid unit name (not including numbers)."/>
                            </TextBox.ToolTip>
                        </TextBox>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Grid.Row="1" Margin="10,0,0,0">
                        <Label Content="UNIT ID:" 
                               Foreground="#747525" 
                               FontSize="14" 
                               FontWeight="Bold"/>
                        <Grid>
                            <ComboBox x:Name="unitComboBox"
                                    ItemsSource="{Binding ListOfUnits, Mode=TwoWay}" 
                                    SelectedItem="{Binding SelectedUnit, Mode=TwoWay}"
                                    FontSize="16"
                                    Padding="8"
                                    BorderBrush="#747525"
                                    BorderThickness="1"
                                    Background="#FFF8F8F8"
                                    DisplayMemberPath="UnitName"/>
                            <Button Content="+"
                                ToolTip="Add new unit"
                                Background="#747525" 
                                Foreground="White"
                                Width="30"
                                Height="30"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Margin="0,0,5,0"
                                Click="addNewUnitBtn_Click">
                                <materialDesign:PackIcon Kind="Add" Width="16" Height="16"/>
                            </Button>
                        </Grid>
                    </StackPanel>
                </Grid>

                <!-- Save Button -->
                <Button x:Name="addButton" 
                       Grid.Row="1"
                       Content="SAVE" 
                       FontSize="16" 
                       Background="#747525" 
                       Foreground="White"
                       Padding="15,8" 
                       HorizontalAlignment="Center" 
                       Width="200"
                       Height="40" 
                       Click="saveButton_Click"
                       Margin="0,237,0,141">
                    <Button.Effect>
                        <DropShadowEffect BlurRadius="5" ShadowDepth="2" Color="#888"/>
                    </Button.Effect>
                </Button>
            </Grid>
        </Grid>
    </Border>
</Window>